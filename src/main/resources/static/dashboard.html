<!doctype html>
<html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Dashboard — GetHired</title>
<link rel="stylesheet" href="/styles.css"/>
</head>
<body>
<nav class="nav"><div class="inner">
  <div class="brand">GET HIRED</div>
  <div class="menu"> 
     <!-- <a href="javascript:void(0)" id="logout">Logout</a> -->
     <a href="index.html"> home</a>

  </div>
</div></nav>

<button class="sidebar-toggle" onclick="toggleSidebar()">☰</button>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <div class="brand">GET HIRED</div>
  <nav>
    <a href="dashboard.html">🏠 Dashboard</a>
    <a href="jobs.html">💼 Jobs</a>
    <a href="applications.html">📄 My Applications</a>
    <a href="profile.html">👤 Profile</a>
    <a href="employers.html">🏢 Employers</a>
    <a href="index.html">↩ Home</a>
  </nav>
</div>


<div class="container">
  <div class="card">
    <h2>Welcome</h2>
    <div id="whoami">Checking session…</div>
  </div>
  <div class="grid cols-2" style="margin-top:16px">
    <div class="card">

      <div id="myApplications">
      <h2>My Applications</h2>


      <!-- <strong>My Applications</strong>
      <p style="color:#475569">Integrate once applications API is available.</p> -->
    </div>
    </div>
    <div class="card">
      <strong>Recommended Jobs</strong>
      <p style="color:#475569">Connect to jobs API to show personalized recommendations.</p>
    </div>
  </div>
</div>

<script>
const user = auth.get();
const appsDiv = document.querySelector('#myApplications');

if(user && appsDiv){
  API.getApplicationsByEmployee(user.id).then(apps=>{
    if(!apps.length){
      appsDiv.innerHTML = '<p>No applications yet</p>';
      return;
    }

    appsDiv.innerHTML = apps.map(a=>
      `<div class="applicationCard">
         <h3>${a.job.title}</h3>
         <p>${a.job.description}</p>
         <p>Status: ${a.status || 'Pending'}</p>
       </div>`
    ).join('');
  });
} else {
  appsDiv.innerHTML = '<p>Please login first</p>';
}

function toggleSidebar() {
    document.getElementById('sidebar').classList.toggle('active');
  }


</script>


<script src="/app.js"></script>
</body></html>
